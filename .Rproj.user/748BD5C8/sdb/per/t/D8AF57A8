{
    "collab_server" : "",
    "contents" : "# IST687 Spring 2017 M002\n# HW8 - Association Rules Mining - The Titanic\n# Sohaib Khawaja SUID 3956085181\n\n# Download the titanic dataset from blackboard.\n\n#install.packages(\"arules\")\n#install.packages(\"arulesViz\")\n#install.packages(\"leaflet\")\n#install.packages(\"googleViz\")\n\nlibrary(arules)\nlibrary(arulesViz)\n\nsetwd(\"C:\\\\DataScience\\\\myR\\\\datasets\\\\\")\n\n# Note is it not a cvs file, but rather, an R dataset. So, to load the data, one would do:\n# load(\"..whatever../Downloads/titanic.raw.rdata\")\n\nload(\"titanic.raw.rdata\")\n\n# You need to look at titanic.raw (the name of the R dataset)\n\nt <- titanic.raw\n\nstr(t)\nhead(t)\n\n# Now that you have the datafile, do some descriptive statistics, getting some extra practice using R.\n\n# Step 1: Descriptive Stats\n\nsummary(t)\n\n# 1)\tCompute the percentage of people that survived.   \n\nonboard <- nrow(t)\nSurYes <- nrow(t[t$Survived == \"Yes\",])\nSurYesPer <- nrow(t[t$Survived == \"Yes\",])/onboard*100\n\ncat(\"Number of pepole onboard Titanic :\", onboard\n  , \"\\nNumber of pepole who survived    :\", SurYes\n  , \"\\nPercentage of people who survived:\", SurYesPer)\n\n\n# 2)\tCompute the percentage of people that were children\n\nonboardChild <- nrow(t[t$Age == \"Child\",])\nonboardChildPer <- nrow(t[t$Age == \"Child\",])/onboard*100\n\ncat(\"Number of children onboard Titanic:\", onboardChild\n    , \"\\nPercentage of people onboard;Child:\", onboardChildPer)\n\n# 3)\tCompute the percentage of people that were female\n\nonboardFemale <- nrow(t[t$Sex == \"Female\",])\nonboardFemalePer <- nrow(t[t$Sex == \"Female\",])/onboard*100\n\ncat(\"Number of females onboard Titanic  :\", onboardFemale\n    , \"\\nPercentage of people onboard;Female:\", onboardFemalePer)\n\n\n# 4)\tFinally, compute the percentage of people that were in first class\n\nonboardFirst <- nrow(t[t$Class == \"1st\",])\nonboardFirstPer <- nrow(t[t$Class == \"1st\",])/onboard*100\n\ncat(\"Number of people in 1st Class onboard Titanic    :\", onboardFirst\n    , \"\\nPercentage of people in 1st Class onboard Titanic:\", onboardFirstPer)\n\n\n# Step 2: More Descriptive Stats\n# 1)\tWhat percentage of children survived?\n\n\nSurChild <- nrow(t[t$Survived == \"Yes\" & t$Age == \"Child\",])\n\nSurChildPer <- nrow(t[t$Survived == \"Yes\" & t$Age == \"Child\",])/onboardChild*100\nPerSurChild <- nrow(t[t$Survived == \"Yes\" & t$Age == \"Child\",])/SurYes*100\n\ncat(SurChildPer,\" percent of children onboard Titanic survived, out of total \",onboardChild\n    ,\"\\n\",PerSurChild,\" percent of survivors were children of the total \",SurYes)\n\n\n# 2)\tWhat percentage of female survived?\n\nSurFemale <- nrow(t[t$Survived == \"Yes\" & t$Sex == \"Female\",])\n\nSurFemalePer <- nrow(t[t$Survived == \"Yes\" & t$Sex == \"Female\",])/onboardFemale*100\nPerSurFemale <- nrow(t[t$Survived == \"Yes\" & t$Sex == \"Female\",])/SurYes*100\n\ncat(SurFemalePer,\" percent of females onboard Titanic survived, out of total \",onboardFemale\n    ,\"\\n\",PerSurFemale,\" percent of survivors were females of the total \",SurYes)\n\n\n# 3)\tWhat percentage of first class people survived?\n\nSur1Class <- nrow(t[t$Survived == \"Yes\" & t$Class == \"1st\",])\n\nSur1ClassPer <- nrow(t[t$Survived == \"Yes\" & t$Class == \"1st\",])/onboardFirst*100\nPerSur1Class <- nrow(t[t$Survived == \"Yes\" & t$Class == \"1st\",])/SurYes*100\n\ncat(Sur1ClassPer,\" percent of people in 1st Class onboard Titanic survived, out of total \",onboardFirst\n    ,\"\\n\",PerSur1Class,\" percent of survivors were from 1st Class of the total \",SurYes)\n\n# 4)\tWhat percentage of 3rd class people survived?\n\nonboardThird <- nrow(t[t$Class == \"3rd\",])\n\nSur3Class <- nrow(t[t$Survived == \"Yes\" & t$Class == \"3rd\",])\n\nSur3ClassPer <- nrow(t[t$Survived == \"Yes\" & t$Class == \"3rd\",])/onboardThird*100\nPerSur3Class <- nrow(t[t$Survived == \"Yes\" & t$Class == \"3rd\",])/SurYes*100\n\ncat(Sur3ClassPer,\" percent of people in 3rd Class onboard Titanic survived, out of total \",onboardThird\n    ,\"\\n\",PerSur3Class,\" percent of survivors were from 3rd Class of the total \",SurYes)\n\nt\n\n# Step 3: Writing a Function\n# 1)\tWrite a function that returns the a new dataframe of people that satisfy the specified criteria of\n#     sex, age, class and survived as parameters\n\nmyPeople <- function(df, Class, Sex, Age, Survived){\n  return(df[df$Class == Class & df$Sex == Sex & df$Age == Age & df$Survived == Survived,])\n}\n\nmyPeople(t, '3rd', 'Female', 'Child', 'No')\n\n# 2)\tWrite a function, using the previous function, that calculates the percentage (who lives, who dies) for a specified (parameters) of age, class and sex.\n\nlivORdie <- function(df, Class, Sex, Age)\n  {\n  lived <- nrow(myPeople(df, Class, Sex, Age, 'Yes'))\n  died <- nrow(myPeople(df, Class, Sex, Age, 'No'))\n  percentage <- lived/(lived+died)*100\n  return(percentage)\n}\n\n# 3)\tUse the function to compare age & 3rd class male survival rates\n\ncat(\"3rd class male survival rates \\nAdult : \", livORdie(t, '3rd', 'Male', 'Adult')\n    ,\"\\nChild : \",livORdie(t, '3rd', 'Male', 'Child'))\n\n# 4)\tUse the function to compare age & 1st class female survival rates\n\ncat(\"1st class female survival rates \\nAdult : \", livORdie(t, '1st', 'Female', 'Adult')\n    ,\"\\nChild : \",livORdie(t, '1st', 'Female', 'Child'))\n\n# Step 4: Use aRules\n# 1)\tUse arules to calculate some rules (clusters) for the titanic dataset\n\nt.rules <- apriori(t)\ninspect(t.rules)\n\n# 2)\tVisualize the results\nplot(t.rules, cex = 1.5, alpha = 0.5)\n\n# 3)\tPick the 3 most interesting & useful rules.\nruleset <- apriori(t, parameter=list(support=0.005, confidence=0.35)) \ninspect(ruleset)\n\nplot(ruleset, cex = 2, alpha = 0.5)\n\nnewrules <- ruleset[quality(ruleset)$lift < 3.9 & quality(ruleset)$lift > 3.3]\ninspect(newrules)\n\n# 4)\tHow does this compare to the descriptive analysis we did on the same dataset? \n\ncat(\"It provides a bit more detail and it helps with big datasets. \\nDescriptive analysis is not always possible if your dataset has non numeric or categorical data.\")\n\n",
    "created" : 1506307697842.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "353280937",
    "id" : "D8AF57A8",
    "lastKnownWriteTime" : 1490932840,
    "last_content_update" : 1490932840,
    "path" : "C:/Users/xSquareGroup/OneDrive/Sohaib/IST687 - Applied Data Science/IST687-skhawaja-HW8.R",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 2,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}